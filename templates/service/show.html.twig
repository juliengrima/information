{% extends 'layout.html.twig' %}

{% block title %}Détails du service{% endblock %}

{% block body %}
<div id="main">
    <section id="one">
        <header class="major">
            <h2>Détails du service {{ service.name }}</h2>
        </header>

         <!-- Actions -->
        <ul class="actions">
            <li><a href="{{ path('app_service_index') }}" class="button small">← Retour à la liste</a></li>
            <li><a href="{{ path('app_service_edit', {'id': service.id}) }}" class="button small">Modifier</a></li>
        </ul>
    </section>

    <div class="row">
        <!-- Colonne gauche -->
        <div class="col-6 col-12-medium">
            <!-- Cadre localisation -->
            <section class="box">
                <h3>Localisation</h3>
                {% if service.localisation %}
                    <p><strong>Site :</strong> {{ service.localisation.siteName }}</p>
                    <p><strong>Adresse :</strong> {{ service.localisation.address }}</p>
                    <p><strong>Ville :</strong> {{ service.localisation.city }}</p>
                {% else %}
                    <p>Aucune localisation renseignée.</p>
                {% endif %}
            </section>

            <!-- Cadre données du service -->
            <section class="box">
                <h3>Données du service</h3>

                {% if service.data %}
                    <p><strong>Informations :</strong></p>
                    <div id="service-data-content">{{ service.data.serviceData|raw }}</div>
                {% else %}
                    <p>Aucune donnée associée pour le moment.</p>
                {% endif %}
            </section>
        </div>

        <!-- Colonne droite -->
        <div class="col-6 col-12-medium">
            <section class="box">
                <h3>Numéros de téléphone & Agents</h3>

                {% if groupedPhones is not empty %}
                    <ul>
                        {% for group in groupedPhones %}
                            <li>
                                <strong>{{ group.phone.type }} :</strong> {{ group.phone.number }}
                                <br>
                                <em>Agent(s) :
                                    {% for agent in group.agents %}
                                        {{ agent.firstname }} {{ agent.name }}{% if not loop.last %}, {% endif %}
                                    {% endfor %}
                                </em>
                            </li>
                        {% endfor %}
                    </ul>
                {% else %}
                    <p>Aucun téléphone enregistré pour ce service.</p>
                {% endif %}
            </section>
        </div>
    </div>
</div>
{% endblock %}